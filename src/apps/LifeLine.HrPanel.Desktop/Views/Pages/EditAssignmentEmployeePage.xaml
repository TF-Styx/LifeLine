<Page x:Class="LifeLine.HrPanel.Desktop.Views.Pages.EditAssignmentEmployeePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:LifeLine.HrPanel.Desktop.Views.Pages" 
      xmlns:b="http://schemas.microsoft.com/xaml/behaviors" 
      xmlns:behaviors="clr-namespace:Shared.WPF.Resources.Behaviors;assembly=Shared.WPF" 
      xmlns:cc="clr-namespace:Shared.WPF.Resources.Controls;assembly=Shared.WPF" 
      xmlns:pages="clr-namespace:LifeLine.HrPanel.Desktop.ViewModels.Pages" 
      d:DataContext="{d:DesignInstance Type=pages:EditAssignmentEmployeePageVM}"
      mc:Ignorable="d" 
      d:Height="auto" d:Width="250"
      MinWidth="250"
      Title="EditAssignmentEmployeePage">

    <b:Interaction.Behaviors>
        <behaviors:AsyncInitializeBehavior/>
    </b:Interaction.Behaviors>

    <Page.Resources>
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontFamily" Value="Arial"/>
        </Style>
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="auto"/>
        </Grid.RowDefinitions>

        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" Background="{StaticResource App.MainColor}">
            <Border Background="{StaticResource App.SecondColor}" Margin="5" CornerRadius="6" BorderThickness="0">
                <StackPanel Margin="5">
                    <!-- Назначение сотрудника -->
                    <StackPanel Margin="0 0 0 10">
                        <TextBlock Grid.Row="0" Text="Назначение" FontSize="20" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0 0 0 10"/>

                        <!-- Отдел / Должность -->
                        <ComboBox Grid.Column="0" 
                                  ItemsSource="{Binding Departments}" 
                                  SelectedItem="{Binding AssignmentContractDisplay.Department}"
                                  DisplayMemberPath="Name" 
                                  Margin="0 0 0 5"/>

                        <ComboBox Grid.Column="1" 
                                  ItemsSource="{Binding Positions}" 
                                  SelectedItem="{Binding AssignmentContractDisplay.Position}"
                                  DisplayMemberPath="Name" 
                                  Margin="0 0 0 5"/>

                        <!-- Менаджер / Статус -->
                        <ComboBox Grid.Column="0" 
                                  ItemsSource="{Binding Managers}" 
                                  SelectedItem="{Binding AssignmentContractDisplay.Manager}"
                                  DisplayMemberPath="Name" 
                                  Margin="0 0 0 5"/>

                        <ComboBox Grid.Column="1" 
                                  ItemsSource="{Binding Statuses}" 
                                  SelectedItem="{Binding AssignmentContractDisplay.Status}"
                                  DisplayMemberPath="Name" 
                                  Margin="0 0 0 5"/>

                        <!-- Дата найма / Дата расторжения договора -->
                        <DatePicker Grid.Column="0" SelectedDate="{Binding AssignmentContractDisplay.HireDate, UpdateSourceTrigger=PropertyChanged}" Margin="0 0 0 5"/>

                        <DatePicker Grid.Column="1" SelectedDate="{Binding AssignmentContractDisplay.TerminationDate, UpdateSourceTrigger=PropertyChanged}" Margin="0 0 0 0"/>
                    </StackPanel>

                    <!-- Контракт -->
                    <StackPanel Margin="0 0 0 10">
                        <TextBlock Grid.Row="0" Text="Контракт" FontSize="20" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0 0 0 10"/>

                        <!-- Тип трудоустройства / Номер контракта -->
                        <ComboBox Grid.Column="0" 
                                  ItemsSource="{Binding EmployeeTypes}" 
                                  SelectedItem="{Binding AssignmentContractDisplay.EmployeeType}"
                                  DisplayMemberPath="Name" 
                                  Margin="0 0 0 5"/>

                        <cc:PlaceHolderTextBox Grid.Column="1" PlaceHolder="Номер контракта*" Margin="0 0 0 5"
                                               Text="{Binding AssignmentContractDisplay.ContractNumber, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource TextBox.PlaceHolder}"/>

                        <!-- Дата старта / Дата окончания -->
                        <DatePicker Grid.Column="0" SelectedDate="{Binding AssignmentContractDisplay.StartDate, UpdateSourceTrigger=PropertyChanged}" Margin="0 0 0 5"/>

                        <DatePicker Grid.Column="1" SelectedDate="{Binding AssignmentContractDisplay.EndDate, UpdateSourceTrigger=PropertyChanged}" Margin="0 0 0 5"/>

                        <cc:PlaceHolderTextBox PlaceHolder="Зарплата*" Margin="0 0 0 0"
                                               Text="{Binding AssignmentContractDisplay.Salary, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource TextBox.PlaceHolder}"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </ScrollViewer>

        <Button Grid.Row="1" Content="Сохранить" Command="{Binding UpdateAssignmentEmployeeCommand}" Height="40" VerticalAlignment="Bottom" Margin="5" Style="{StaticResource App.Button}"/>
    </Grid>

</Page>
